<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.0.0"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><title data-react-helmet="true">[coursera] AngularJS week 2-1 | bono&#x27;s blog</title><meta data-react-helmet="true" name="description" content="Task Runners, Angular Scope, Forms and Form Validation-1 Web Tools: Grunt and Gulp Task-Runners 웹개발을 하다보면 반복적으로 처리해야하는 태스크가 많이 있다. DRY(do…"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link as="script" rel="preload" href="/0-8bf3a8bc80e5222607e7.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-fee95fd76061ab2b91a6.js"/><link as="script" rel="preload" href="/app-351efcfeb4f54983a1ef.js"/><link as="script" rel="preload" href="/webpack-runtime-589a7ddf210818ed526a.js"/><link rel="preload" href="/static/d/290/path---2016-08-25-frontend-javascript-framework-angularjs-week-2-1-55-a-437-pNExTmmpyHHJcAR0ZrdVJ4QUj4.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Gatsby Starter Blog</a></h3><h1>[coursera] AngularJS week 2-1</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">August 25, 2016</p><div><h2>Task Runners, Angular Scope, Forms and Form Validation-1</h2>
<h3>Web Tools: Grunt and Gulp</h3>
<h4>Task-Runners</h4>
<p>웹개발을 하다보면 반복적으로 처리해야하는 태스크가 많이 있다. DRY(do not repeat yourself) 원칙에 따라 태스크를 자동화하기 빌드툴을 사용할 필요가 있다.</p>
<p>CSS 에서 보면 Sass 나 Less 로 컴파일하거나, 어떤 vender prefixes 를 추가하거나 Minification(spaces, newlines, comments 등의 불필요한 캐릭터 삭제)하거나 Concatenation 등의 반복적이 Tasks 가 있다.</p>
<p>Javascript 의 경우에는, JSHint 를 이용한 자바스크립트 에러체킹이나 Concatenation, Uglification(minification + mangling(변수명 char 하나로 줄이기)) 등이 있겠다.</p>
<p>이 외에도 Image 용량 최적화, 태스크 rerunning, 변경된 사항 반영하기 위한 server and Livereload, 파일 변경, 테스팅 등의 반복적인 태스크가 있다.</p>
<p>위에서 살펴본 반복적인 태스크를 Grunt, Gulp 등의 Task Runners 를 이용해 자동화 할 수 있다.</p>
<h3>Grunt</h3>
<p>Grunt 는 configuration 기반의 태스크 러너이다. 우선 install 하자. -g 옵션을 주어 global 하게 사용할 수 있도록 한다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install -g grunt-cli</code></pre></div>
<p>Grunt 의 설정팔일은 Gruntfile.js 로 정의한다. 대략적인 구조를 살펴보면 아래와 같다.
function 의 argument 에 grunt 객체가 들어가고 그 아래에 필요한 코드를 추가한다. 자세한 내용은 차차 알아보자.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">module.exports = function(grunt) {
	// do requires here
	require(&#39;jit-grunt&#39;)(grunt);

	// do grunt task configurations here
	grunt.initConfig({

	});

	// register tasks here
	grunt.registerTask(&#39;build&#39;, [&#39;jshint&#39;]);
	grunt.registerTask(&#39;default&#39;, [&#39;build&#39;]);
}</code></pre></div>
<h4>File Globbing Patterns</h4>
<p>Grunt 는 File Globbing Patterns 를 사용한다. File Globbing Patterns 이란 다음의 내용을 말한다.</p>
<ul>
<li>* 문자열, but not /</li>
<li>? 문자 하나, but not /</li>
<li>** 문자열 including /</li>
<li>{} comma 로 or 를 표현함</li>
<li>! 패턴매치가 negative 함</li>
</ul>
<p>몇가지 예제를 살펴보자
우선 jshint 와 jshint-stylish 모듈을 install 한다.
jshint 는 자바스크립트의 문법을 체크해주는 모듈이다. 세미콜론이 빠졌거나, 괄호가 빠져 있는것 처럼 문법오류나 개선할 부분이 필요한 것을 체크해준다. jshint-stylish 는 jshint 의 메세지를 좀 더 잘 보여주기 위한 스타일을 제공하는 모듈이다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install grunt-contrib-jshint --save-dev
npm install jshint-stylish --save-dev</code></pre></div>
<p>그리고 Configuration 을 다음과 같이 작성하자.
Configuration 파일은 프로젝트 root 폴더에서 Gruntfile.js 를 만들어 아래 내용을 저장한다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">jshint: {
	options: {
		jshintrc: &#39;.jshintrc&#39;,
		reporter: require(&#39;jshint-stylish&#39;)
	},
	all: {
		// 실제 체크할 자바스크립트 파일의 경로를 지정한다.
		// Gruntfile.js와 app/scripts의 모든 .js 파일을 검사하겠다는 의미다.
		src: [&#39;Gruntfile.js&#39;, &#39;app/scripts/{,*/}*.js&#39;]
	}
}</code></pre></div>
<p>설정파일은 자바스크립트 객체 형식으로 구성된다. options 는 jshint 설정파일과 그외 포맷을 위한 style 모듈이 reporter 로 정의되어 있다. hshintrc 는 jshint 설정파일이다. all 부분은 jshint 를 적용할 자바스크트 파일을 Globbing 패턴으로 지정하였다.</p>
<h4>Greating a Distribution Folder</h4>
<p>수많은 Grunt 관련 모듈과 css, js 파일들을 설치함으로써 프로젝트 구성이 점점 복잡해지고 있다. 그래서 Distribution Folder 를 만들어 꼭 필요한 모듈만 이용하는 웹사이트를 만들어 보자.</p>
<p>다음의 모듈을 설치한다.
global(-g) 옵션이 없는 설치는 local 설치이므로 모듈을 사용할 프로젝트 디렉토리에서 실행한다.</p>
<h4>usemin module</h4>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">// 조건에 맞는 모든 파일을 원하는 폴더(여기서는 dist)로 복사한다.
npm install grunt-contrib-copy --save-dev

// 해당 폴더의 clean out 한다. rebuild를 위한 초반 작업이다. 그렇기 때문에 가장 먼저 실행해야한다.
npm install grunt-contrib-clean --save-dev

// js, css 파일들을 하나로 합쳐준다.
npm install grunt-contrib-concat --save-dev

// css 파일 minification
npm install grunt-contrib-cssmin --save-dev

// 자바스크립트 변수를 문자열 =&gt; 문자로 변경한다.
npm install grunt-contrib-uglify --save-dev

// minification한 뒤, css, js 파일을 버전업한다. (브라우저 캐싱 대비)
// 해싱 알고리즘과 length등을 선택할 수 있다.
npm insatll grunt-filerev --save-dev

// css, js 파일을 minification 해준다.
// useminPrepare -&gt; concat -&gt; cssmin -&gt; uglify -&gt; filerev -&gt; usemin의 순서로 태스크가 진행된다.
npm insatll grunt-usemin --save-dev</code></pre></div>
<p>usemin 은 js, css 파이릉 minification 하기 위한 모듈이다. usemin 은 독자적으로 동작하지 않고 여러가지 모듈을 거쳐가는데 대체로 다음과 같다.</p>
<blockquote>
<p>useminPrepare -> concat -> cssmin -> uglify -> filerev -> usemin</p>
</blockquote>
<p>우선 useminPrepare 는 html 주석 처리된 부분을 기준으로 css, js 각각의 하나의 파일로 합치기 위한 준비를 한다. concat 을 통해 css, js 파일들을 각각 하나로 합쳐준다. 그리고 cssmin, uglify 모듈을 통해 css, js 파일을 minification 하고 filerev 로 버전관리를 한다. 마지막으로 usemin 이 html 파일에 이전의 모든 모듈이 행한 결과를 반영한다.</p>
<h4>watch</h4>
<p>original 파일의 변경이 발생하였을때 rerun 하기 위한 모듈이다.
설정된 모든 파일중에 하나라도 변경이 일어나면 즉시 reload 한다.
reload 는 모든 파일들을 복사하는것과 같다고 보면 된다.
그런데, js, css 파일들은 copy 를 예외처리하는데, usemin 모듈에서 먼저 빌드처리 되기 때문에 watch 에서는 제외된다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install grunt-contrib-watch --save-dev</code></pre></div>
<h4>connect</h4>
<p>브라우저에서 dist 폴더의 특정 html 파일(보통 index.html)이 실행되도록 한다.
watch 모듈과 같이 사용하면 이렇게 사용할 수 있다.</p>
<blockquote>
<p>파일 변경 -> livereload (build and copy) -> open(update) browse</p>
</blockquote>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install grunt-contlib-connect --save-dev</code></pre></div>
<h4>Gruntfile.js</h4>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">&#39;use strict&#39;;

module.exports = function (grunt) {

	require(&#39;time-grunt&#39;)(grunt);
	require(&#39;jit-grunt&#39;)(grunt, {
		useminPrepare: &#39;grunt-usemin&#39;
	});

	grunt.initConfig({
		pkg: grunt.file.readJSON(&#39;package.json&#39;),
		jshint: {
			options: {
				jshintrc: &#39;.jshintrc&#39;,
				reporter: require(&#39;jshint-stylish&#39;)
			},
			all: {
				src: [
					&#39;Gruntfile.js&#39;,
					&#39;app/scripts/{,*/}*.js&#39;
				]
			}
		},
		useminPrepare: {
			html: &#39;app/menu.html&#39;,
			options: {
				dest: &#39;dist&#39;
			}
		},
		concat: {
			options: {
				separator: &#39;;&#39;
			},
			dist: {}
		},
		uglify: {
			dist: {}
		},
		cssmin: {
			dist: {}
		},
		filerev: {
			options: {
				encoding: &#39;utf8&#39;,
				algorithm: &#39;md5&#39;,
				length: 20
			},
			release: {
				files: [{
					src: [
						&#39;dist/scripts/*js&#39;,
						&#39;dist/styles/*.css&#39;
					]
				}]
			}
		},
		usemin: {
			html: [&#39;dist/*.html&#39;],
			css: [&#39;dist/styles/*.css&#39;],
			options: {
				assetsDirs: [&#39;dist&#39;, &#39;dist/styles&#39;]
			}
		},

		copy: {
			dist: {
				cwd: &#39;app&#39;,
				src: [&#39;**&#39;, &#39;!styles/**/*.css&#39;, &#39;!scripts/**/*.js&#39;],
				dest: &#39;dist&#39;,
				expand: true
			},
			fonts: {
				files:[
					{
						expand: true,
						dot: true,
						cwd: &#39;bower_components/bootstrap/dist&#39;,
						src: [&#39;fonts/*.*&#39;],
						dest: &#39;dist&#39;
					}, {
						expand: true,
						dot: true,
						cwd: &#39;bower_components/font-awesome&#39;,
						src: [&#39;fonts/*.*&#39;],
						dest: &#39;dist&#39;
					}
				]
			}
		},
		watch: {
			copy: {
				files: [&#39;app/**&#39;, &#39;!app/**/*.css&#39;, &#39;!app/**/*.js&#39;],
				tasks: [&#39;build&#39;]
			},
			scripts: {
				files: [&#39;app/scripts/app.js&#39;],
				tasks: [&#39;build&#39;]
			},
			styles: {
				files: [&#39;app/styles/mystyles.css&#39;],
				tasks:[&#39;build&#39;]
			},
			livereload: {
				options: {
					livereload: &#39;&lt;%= connect.options.livereload %&gt;&#39;
				},
				files: [
					&#39;app/{,*/}*.html&#39;,
					&#39;.tmp/styles/{,*/}*.css&#39;,
					&#39;app/images/{,*/}*.{png,jpg,jpeg,gif,webp,svg}&#39;
				]
			}
		},
		connect: {
			options: {
				port: 9000,
				hostname: &#39;localhost&#39;,
				livereload: 35729
			},
			dist: {
				options: {
					open: true,
					base: {
						path: &#39;dist&#39;,
						options: {
							index: &#39;menu.html&#39;,
							maxAge: 300000
						}
					}
				}
			}
		},
		clean: {
			build: {
				src: [&#39;dist/&#39;]
			}
		}
	});

	// 태스크 등록
	// 순서가 중요하다.
	// jshint로 모든 .js 파일을 검사하게 된다.
	grunt.registerTask(&#39;build&#39;, [
		&#39;clean&#39;,
		&#39;jshint&#39;,
		&#39;useminPrepare&#39;,
		&#39;concat&#39;,
		&#39;cssmin&#39;,
		&#39;uglify&#39;,
		&#39;copy&#39;,
		&#39;filerev&#39;,
		&#39;usemin&#39;
	]);

	// 순서가 중요하다. 먼저 build, 다음에는 브라우져 오픈, watch
	// watch가 마지막에 실행되므로, 파일 변경을 감지하면 build, 브라우저 오픈, 다시 watch 와 같은 순서로 진행된다.
	grunt.registerTask(&#39;serve&#39;, [&#39;build&#39;,&#39;connect:dist&#39;,&#39;watch&#39;]);
	grunt.registerTask(&#39;default&#39;, [&#39;build&#39;]);
};</code></pre></div>
<h3>Gulp</h3>
<p>Grunt 는 Configuration 기반의 태스크 러너였다면, 반대로 Gulp 는 코드 기반의 태스크 러너 이다. Gulp 는 Grunt 처럼 태스크를 실행하기 위한 중간 파일을 만들지 않고 NodeJS streams 을 사용하여 복잡한 파이프라인 형태로 실행된다(무슨 말이지는 잘 모르겠지만, 예제를 보면 알겠지).</p>
<p>일단 global 로 설치하자.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install -g gulp</code></pre></div>
<p>Grunt 예제와 비슷하게 동작하는 예제를 실행하기 위해 다음과 같은 plugins 을 설치한다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install
	gulp-jshint jshint-stylish
	gulp-imagemin gulp-concat gulp-uglify gulp-minify-css gulp-usemin
	gulp-cache gulp-rev gulp-rename gulp-notify
	browser-sync del
--save-dev</code></pre></div>
<p>플러그인을 로드하는 방법은 다음과 같다.
직접 각 플러그인을 로드해도 되지만, package.json 파일 형태로 저장할 수도 있다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">var gulp = require(&#39;gulp&#39;),
  jshint = require(&#39;gulp-jshint&#39;)
  sylish = require(&#39;jshint-stylish&#39;)

  ...</code></pre></div>
<h4>Gulp Streams</h4>
<p>Gulp Streams 는 nodeJS streams 를 사용하여 파이프라인을 구성하는데, 파이프 라인이란 하나의 function 의 결과가 다음 function 으로 그대로 전달되는 연쇄적인 명령셋을 말한다. 예제를 살펴보자</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">gulp.task(&#39;jshint&#39;, function() {
	gulp.src(&#39;app/scripts/**/*.js&#39;)
	.pipe(jshint())
	.pipe(jshint.reporter(stylish));
});</code></pre></div>
<p>우선 걸프 태스크를 생성하고 그 안에서 소스를 선택하고 jshint 를 생성하고 스타일을 적용해주는 일련의 명령들을 pipe 라는 function 을 이용하여 연결하였다.</p>
<p>Watch 태스크 예제를 살펴보자</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">gulp.task(&#39;watch&#39;, [&#39;browser-sync&#39;], function() {
	gulp.watch(&#39;{app/scripts/**/*.js, app/style/**/*.css, app/**/*.html}&#39;, [&#39;usemin&#39;]);
	gulp.watch(&#39;app/images/**/*&#39;, [&#39;imagemin&#39;]);
});</code></pre></div>
<p>태스크의 두번째 인자를 보면, browser-sync 가 대괄호로 묶여져 있다. 이 의미는 browser-sync 는 watch 태스크에 종속적이라는 말이다. 즉, watch 태스크가 실행되면 자동으로 browser-sync 가 실행된다.</p>
<h4>Default Task</h4>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">gulp.task(&#39;default&#39;, [&#39;clean&#39;], function() {
	gulp.start(&#39;usemin&#39;, &#39;imagemin&#39;, &#39;copyfonts&#39;);
});</code></pre></div>
<p>default 태스크는 콘솔창에서 gulp 라고 입력하면 실행되는 태스크이다. clean 태스크가 연쇄적으로 발생하게 되고, 내부에서는 서로 dependency 가 없는 usemin, imagemin, copyfonts 가 동시에 실행된다.</p>
<h4>gulpfile.js</h4>
<p>콤마(,)와 띄어쓰기에 유의해야 한다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">var gulp = require(&#39;gulp&#39;),
	minifycss = require(&#39;gulp-minify-css&#39;),
	jshint = require(&#39;gulp-jshint&#39;),
	stylish = require(&#39;jshint-stylish&#39;),
	uglify = require(&#39;gulp-uglify&#39;),
	usemin = require(&#39;gulp-usemin&#39;),
	imagemin = require(&#39;gulp-imagemin&#39;),
	rename = require(&#39;gulp-rename&#39;),
	concat = require(&#39;gulp-concat&#39;),
	notify = require(&#39;gulp-notify&#39;),
	cache = require(&#39;gulp-cache&#39;),
	changed = require(&#39;gulp-changed&#39;),
	rev = require(&#39;gulp-rev&#39;),
	browserSync = require(&#39;browser-sync&#39;),
	del = require(&#39;del&#39;);

gulp.task(&#39;jshint&#39;, function() {
	return gulp.src(&#39;app/scripts/**/*.js&#39;)
		.pipe(jshint())
		.pipe(jshint.reporter(stylish));
});

gulp.task(&#39;usemin&#39;, [&#39;jshint&#39;], function() {
	return gulp.src(&#39;./app/menu.html&#39;)
		.pipe(usemin({
			css:[minifycss(),rev()],
			js: [uglify(),rev()]
		}))
		.pipe(gulp.dest(&#39;dist/&#39;));
});

gulp.task(&#39;imagemin&#39;, function() {
	return del([&#39;dist/images&#39;]), gulp.src(&#39;app/images/**/*&#39;)
		.pipe(cache(imagemin({ optimizationLevel: 3, progressive: true, interlaced: true })))
		.pipe(gulp.dest(&#39;dist/images&#39;))
		.pipe(notify({ message: &#39;Images task complete&#39; }));
});

gulp.task(&#39;clean&#39;, function() {
	return del([&#39;dist&#39;])
});

gulp.task(&#39;copyfonts&#39;, [&#39;clean&#39;], function() {
	gulp.src(&#39;./bower_components/font-awesome/fonts/**/*.{ttf,woff,eof,svg}*&#39;)
		.pipe(gulp.dest(&#39;./dist/fonts&#39;));
	gulp.src(&#39;./bower_components/bootstrap/dist/fonts/**/*.{ttf,woff,eof,svg}*&#39;)
		.pipe(gulp.dest(&#39;./dist/fonts&#39;));
});

gulp.task(&#39;watch&#39;, [&#39;browser-sync&#39;], function() {
	gulp.watch(&#39;{app/scripts/**/*.js,app/styles/**/*.css,app/**/*.html}&#39;, [&#39;usemin&#39;]);
	gulp.watch(&#39;app/images/**/*&#39;, [&#39;imagemin&#39;]);
});

gulp.task(&#39;browser-sync&#39;, [&#39;default&#39;], function() {
	var files = [
		&#39;app/**/*.html&#39;,
		&#39;app/styles/**/*.css&#39;,
		&#39;app/images/**/*.png&#39;,
		&#39;app/scripts/**/*.js&#39;,
		&#39;dist/**/*&#39;
	];

	browserSync.init(files, {
		server: {
			baseDir: &quot;dist&quot;,
			index: &quot;menu.html&quot;
		}
	});

	gulp.watch([&#39;dist/**&#39;]).on(&#39;change&#39;, browserSync.reload);
});

gulp.task(&#39;default&#39;, [&#39;clean&#39;], function() {
	gulp.start(&#39;usemin&#39;, &#39;imagemin&#39;, &#39;copyfonts&#39;);
});</code></pre></div></div><hr style="margin-bottom:1.75rem"/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/2016/08/18/frontend-javascript-framework-angularjs-week1/">← <!-- -->[coursera] AngularJS week 1</a></li><li><a rel="next" href="/2016/08/28/frontend-javascript-framework-angularjs-week2-2/">[coursera] AngularJS week 2-2<!-- --> →</a></li></ul></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-50048807-2', 'auto', {});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2016-08-25-frontend-javascript-framework-angularjs-week-2-1-55a","path":"/2016/08/25/frontend-javascript-framework-angularjs-week2-1/"};window.dataPath="290/path---2016-08-25-frontend-javascript-framework-angularjs-week-2-1-55-a-437-pNExTmmpyHHJcAR0ZrdVJ4QUj4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-351efcfeb4f54983a1ef.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-31ee4b698d609e346331.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-fee95fd76061ab2b91a6.js"],"component---src-pages-404-js":["/component---src-pages-404-js-bd47a77552aee32af5f8.js"],"component---src-pages-index-js":["/component---src-pages-index-js-7c4638696cb877443516.js"]};/*]]>*/</script><script src="/webpack-runtime-589a7ddf210818ed526a.js" async=""></script><script src="/app-351efcfeb4f54983a1ef.js" async=""></script><script src="/component---src-templates-blog-post-js-fee95fd76061ab2b91a6.js" async=""></script><script src="/0-8bf3a8bc80e5222607e7.js" async=""></script></body></html>